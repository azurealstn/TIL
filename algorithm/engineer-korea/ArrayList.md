# ArrayList

ArrayList를 알아보기 전에 먼저 Array에 대한 특징을 간략히 살펴보면..

- 고정된 크기를 갖는다.
- (논리) 메모리에 연속적으로 배치되어 있다.
- 순서가 존재하며 순차적으로 할당된다.

특징을 보면 Array의 가장 큰 한계는 고정된 크기라는 점이다.

- 배열은 인덱스에 따라서 값을 유지하기 때문에 데이터가 삭제되어도 빈자리가 그대로 남게되어 메모리 낭비가 있다.
- 빈자리를 채우기 위해 데이터들을 Shift 해야하는 연산 작업이 있다.
- 따라서 위의 한계를 극복하기 위해 나온 것이 ArrayList이다.

> 💡 PHP에서는 Array가 고정된 크기가 아닌 데이터 추가시 자동으로 사이즈가 늘어난다. 

## ArrayList 개념

1

- 자바에서 ArrayList는 자바 컬렉션 프레임워크중 하나인 `List` 인터페이스의 구현체이다.
- Array의 한계점을 극복하여 데이터가 추가되어도 배열의 사이즈가 동적으로 늘어난다.
- 심지어 검색 속도 또한 Array와 동일한 `O(1)`의 시간복잡도를 갖는다.

이것이 가능한 이유는 ArrayList는 배열의 방이 모두 차면 배열의 크기를 기존의 2배로 늘린다. 따라서 검색시에는 여전히 고정된 배열에서 진행하기 때문이다. (배열의 크기만 늘릴뿐 인덱스에는 영향이 없다!)

## Doubling

2

- ArrayList는 배열 방이 모두 찼을 때 기존 배열 방 크기의 2배만큼 늘린다고 했다.
- 이 때 기존 배열에서 늘리는 것이 아닌 크기를 2배 늘린 새로운 배열을 생성하는 것이다. 
- 그래서 기존 배열에 있던 데이터들을 모두 새로운 배열에 복사하는 작업을 바로 Doubling 이라고 한다.
- Doubling이 소요되는 시간은 기존 데이터 개수가 n이라고 할 때 Doubling이 수행되면 `O(n)`의 시간복잡도를 갖는다.

배열의 크기를 2배만큼 늘리고, 새로운 배열을 생성하고 또 기존 데이터를 가지고 모두 복사까지 하는 이러한 번거로운 작업임에도 불구하고 ArrayList의 입력(복사) 시간은 `O(1)`이 된다. 그 이유를 살펴보자.

3

Doubling 작업을 한 후에 새로운 배열에서 절반의 데이터는 기존에 있던 데이터들일 것이다. 즉 새로운 배열에 복사해야 하는 데이터의 양은 새로운 배열 크기의 절반이다.

위 과정에 따라서 새로운 배열 방 크기를 n이라고 했을 때 n/2개 만큼만 복사하면 된다.

4

그 전의 배열을 봤을 때 Doubling 작업은 n/2 크기의 절반 즉, n/4 만큼만 복사하면 된다. 또 그전의 Doubling 작업은 n/4 크기의 절반인 n/8 만큼만 복사하면 된다. 결국에는 데이터가 1개가 남을 때까지 반복하게 될 것이다.

따라서 복사하는 총 데이터양은 `n/2 + n/4 + n/8 + ... + 2 + 1`개로 이는 모두 합해도 결국에는 N보다는 작다.

### 결론



## References

- http://www.incodom.kr/Array