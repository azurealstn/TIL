# 스프링의 주요 특징

- POJO 기반의 구성
- 의존성 주입(DI)을 통한 객체간의 관계 구성
- AOP(Aspect-Oriented-Programming) 지원
- 편리한 MVC 구조
- WAS의 종속적이지 않은 개발 환경

## POJO 기반의 구성
스프링 내부에는 객체 간의 관계를 구성할 수 있는 특징을 가지고 있다. 이 관계를 별도의 `API`를 사용하지 않고 `POJO(Plain Old Java Object)`의 구성만으로도 가능하도록 설계되었다. 이 말은 `Java코드`만으로 객체를 구성하는 방식을 스프링에서 그대로 사용할 수 있는 것을 말한다.

**Java 코드로 구현이 가능하니까 다른 라이브러리나 컨테이너의 기술에 종속적이지 않다**는 장점이 있는 것이다. 이러면 생산성, 유지보수 코드에 대한 테스트가 협업할 때 수월할 것이다.

## 의존성 주입(DI)과 스프링
사실 정말로 중요한 이 `DI(Dependency Injection)`라는 의존성  주입이다. 의존성이라는 것은 하나의 객체가 다른 객체 없이는 제대로 된 역할을 수행할 수 없음을 나타낸다. 즉, **다른 객체에 의존을 하고 있다**는 의미이다.

**주입은 말 그대로 외부에서 밀어 넣는 것을 말한다.**
결국 **의존성 주입이라는 것은 어떤 객체가 필요한 객체를 외부에서 밀어 넣는 것**을 의미한다.

#### 왜 외부에서 밀어넣어주는 방식을 선택한 것일까
만약 내가 직접 라이브러리 등을 일일이 다 적용시키고 어떤 작업하려면 온전히 개발에 집중하기 어려울 것이다 . 하지만 외부에서 가져온 라이브러리를 가져다 밀어넣기만해서 사용할 수 있다면 온전히 개발에 집중할 수 있다.

즉, **어떤 객체에 의존하든 자신의 역할은 변하지 않으니 어떤 객체인지 신경쓸 필요가 없다는 것이다.**

이러한 의존성 주입을 해줄 수 있는 이유는 **스프링에서는 ApplicationContext라는 녀석이 필요한 객체들을 생성하고, 필요한 객체들을 주입하는 역할을 해주기 때문이다.**
**ApplicationContext가 관리하는 객체들을 빈(Bean)이라 부른다. 이 빈과 빈 사이의 의존관계를 처리하는 방식으로 XML, 어노테이션, Java 설정 방식을 이용할 수 있다.**

#### 어노테이션

- `@Component` : 스프링에게 해당 클래스가 스프링에서 관리해야 하는 대상임을 표시한다.
- `@Data` : Lombok의 기능으로 **getter, setter, toString, constructor ...** 등을 자동생성해준다.
- `@Setter` : set메소드이름() 를 **컴파일 시에 생성**한다.
- `@Runwith` : 테스트 코드 작성을 위한 어노테이션
- `@ContextConfiguration` : 속성값으로 문자열을 이용하여 필요한 객체들을 스프링 내에 객체로 등록한다.
- `@Log4j` : 로그를 기록하는 Logger 변수를 생성한다.
- `@Log` : 클래스에 붙여주면 내부적으로 `static final`로 Logger 객체가 생성된다.
- `@AllArgsConstructor` : 인스턴스 변수로 선언된 모든 것을 파라미터로 받는 생성자를 작성

### 스프링 동작

![캡처](https://user-images.githubusercontent.com/55525868/109373978-66167300-78f5-11eb-9b26-e82ebf5abfc9.PNG)

- 스프링 시작되면 스프링 사용하는 메모리 영역이 만들어지게 되는데 이를 `컨텍스트(Context)`라고 한다. 스프링에서는 `ApplicationContext`라는 객체가 만들어진다.
- 스프링은 자신이 객체를 생성하고 관리해야하는 객체들에 대한 설정이 필요하는데 그것이 `root-context.xml` 파일이다.
- `<context:component-scan>` 태그를 통해 자바의 패키지를 스캔(Scan)한다.
- 해당 패키지에 있는 클래스중에서 스프링 사용하는 `@Component`이 있으면 클래스의 인스턴스를 생성한다.
- `@Autowired`를 사용하여 하나의 객체에 다른 객체를 주입할 수 있다.

---

1. 스프링 프레임워크의 동작
2. 동작하는 과정에서 필요한 객체들을 스프링에 등록
3. 의존성 주입이 필요한 객체는 자동으로 주입

## MyBatis
**MyBatis는 기존의 SQL을 그대로 활용할 수 있다는 장점이 있고, 진입장벽이 낮은 편이어서 JDBC의 대안으로 많이 사용하고 있다.**

- 자동으로 Connection을 맺고 close()한다.
- 내부적으로 PreparedStatement를 처리한다.

![캡처](https://user-images.githubusercontent.com/55525868/109375569-26ee1f00-7901-11eb-8913-13e631f1bb4a.PNG)

- 관련 라이브러리
	- spring-jdbc/spring-tx : 스프링에서 DB 처리와 트랜잭션 처리
	- mybatis/mybatis-spring : mybatis와 스프링 연동
- MyBatis에서 핵심적인 객체는 `SQLSession`인데 이를 통해 Connection을 생성하거나 원하는 SQL을 전달하고, 결과를 리턴받는 구조로 작성한다.
- `root-context.xml`에서 작성하는 방법과 Java 설정을 하는 방법이 있는데 자바에서는 `@Bean`을 이용해서 설정한다.

## 스프링 MVC 기본 구조

![캡처](https://user-images.githubusercontent.com/55525868/109386993-dc40c700-7941-11eb-9b34-fa771f3da393.PNG)
